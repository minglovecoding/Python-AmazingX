### USACO 2024 February Contest, Silver

### Problem 3. Vocabulary Quiz

### ğŸ§© é¢˜æ„ï¼š

Elsie åœ¨æ¯ä¸€è½®è¦åšå‡ºä¸€ä¸ªé€‰æ‹©ï¼ˆEven æˆ– Oddï¼‰ï¼Œ Bessie åœ¨æ¯ä¸€è½®ä¼šä»å¤šä¸ªå¯é€‰çš„æ•°å­—ä¸­é€‰ä¸€ä¸ªï¼ˆæ¶æ„åœ°æƒ³è®© Elsie è¾“ï¼‰ã€‚Elsie è¦ **ä¿è¯è‡ªå·±æ°¸è¿œä¸ä¼šè¾“**ï¼Œæ— è®º Bessie æ€ä¹ˆå‡ºç‰Œã€‚

è¦æ±‚ï¼š

- ä¸€ä¸²â€œEven/Oddâ€é€‰æ‹©ï¼Œä½¿ Elsie å§‹ç»ˆä¸å¯èƒ½è¾“ï¼›

- å¹¶ä¸”åœ¨æ‰€æœ‰å¯è¡Œç­–ç•¥ä¸­å­—å…¸åºæœ€å°ã€‚

### ğŸ§  æ€è·¯ï¼š

ç¡®å®šå¯é€‰çš„å®‰å…¨èŒƒå›´ï¼Œæ¯ä¸€æ­¥åšå†³å®šå‰éœ€è€ƒè™‘æ˜¯å¦èƒ½æ‰¿å—æ¥ä¸‹æ¥çš„æœ€åç»“æœã€‚

### 1ï¸âƒ£ çŠ¶æ€é€’æ¨æ€æƒ³

åœ¨ç¬¬ `i` è½®ï¼ŒElsie å½“å‰æœ‰ `N_i` ä¸ªå¼¹ç ã€‚

å¥¹çš„é€‰æ‹©ä¼šå¯¼è‡´ï¼š

- è‹¥çŒœå¯¹ â†’ `N_{i+1} = N_i + a_i`
- è‹¥çŒœé”™ â†’ `N_{i+1} = N_i - a_i`

å› æ­¤ï¼Œç¬¬ `i` è½®çš„â€œå®‰å…¨æ€§â€å–å†³äº **ç¬¬ `i+1` è½®æ˜¯å¦å®‰å…¨**ã€‚

æ‰€ä»¥ä½ å¯ä»¥è¿™æ ·æƒ³ï¼š
$$
dp[i] = \text{ä»ç¬¬ } i \text{ è½®å¼€å§‹æ˜¯å¦æœ‰ä¸è¾“ç­–ç•¥}
$$
è€Œè½¬ç§»ä¾èµ–äºï¼š
$$
dp[i] = f(dp[i+1], a_i)
$$
è¿™å°±æ˜¯ **åŠ¨æ€è§„åˆ’çš„å…¸å‹â€œä»åå¾€å‰é€’æ¨â€ç»“æ„**ã€‚

### 2ï¸âƒ£ DP çš„æ ¸å¿ƒè½¬ç§»é€»è¾‘

å¯¹äºç¬¬ `i` è½®ï¼š

- å¦‚æœé€‰æ‹© â€œEvenâ€ï¼Œåˆ™å¯¹äºæ‰€æœ‰å¯èƒ½çš„ `a_{i,j}`ï¼Œå¿…é¡»ä¿è¯ï¼š
  - å½“ `a_{i,j}` æ˜¯å¶æ•° â†’ çŒœå¯¹ â†’ Elsie å¢åŠ  `a_{i,j}`ï¼Œä»ç„¶å®‰å…¨ï¼›
  - å½“ `a_{i,j}` æ˜¯å¥‡æ•° â†’ çŒœé”™ â†’ Elsie å‡å°‘ `a_{i,j}`ï¼Œä»ç„¶å®‰å…¨ã€‚

åŒç†ï¼Œå¦‚æœé€‰æ‹© â€œOddâ€ï¼Œåˆ™å¯¹å¶å¥‡æ¡ä»¶äº’æ¢ã€‚

ğŸ‘‰ è¿™å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªâ€œæ‰€æœ‰åˆ†æ”¯éƒ½å¿…é¡»å®‰å…¨â€çš„ **AND çŠ¶æ€è½¬ç§»**ã€‚

åœ¨ä»£ç å±‚é¢ï¼Œå®ƒé€šè¿‡â€œé¢„è®¡ç®—æœ€åæƒ…å†µï¼ˆmin_psumï¼‰â€å®ç°ï¼Œ
 è€Œè¿™ä¸ª `min_psum[t]` æœ¬è´¨ä¸Šè®°å½•äº† **t** åæœ€åçš„å‡€æŸå¤±ï¼Œç”¨åç¼€æœ€å°å’Œä¿å­˜ã€‚

### 3ï¸âƒ£ è½¬ç§»æ–¹å‘

- çŠ¶æ€è½¬ç§»ä»åå¾€å‰è®¡ç®—ï¼ˆåå‘ DPï¼‰ï¼›
- æ¯ä¸ªçŠ¶æ€åªä¾èµ–ä¸‹ä¸€ä¸ªçŠ¶æ€çš„å®‰å…¨åŒºé—´ï¼›
- å› æ­¤æ˜¯ä¸€ä¸ª **ä¸€ç»´ DP**ï¼›
- æ—¶é—´å¤æ‚åº¦ O(M)ã€‚

### âš™ï¸ åœ¨ç¡®å®šå­—å…¸åºæœ€å°ç­”æ¡ˆæ—¶ï¼š

- æ¯ä¸€è½®ä¼˜å…ˆå°è¯• "Even"ï¼Œåªæœ‰åœ¨è¿™ä¼šå¯¼è‡´å¤±è´¥æ—¶æ‰å°è¯• "Odd"ï¼›
- è¿™ç›¸å½“äºåœ¨ DP çš„â€œè½¬ç§»é€‰æ‹©â€ä¸­åŠ äº†ä¸€å±‚è´ªå¿ƒæ’åºã€‚

### âœ… ç»“è®º

> è¿™é“ Moorbles é¢˜ **å±äºåŠ¨æ€è§„åˆ’æ€æƒ³é¢˜**ï¼ˆç‰¹åˆ«æ˜¯åšå¼ˆå‹ DPï¼‰ã€‚
>  è™½ç„¶ä»£ç å½¢å¼åƒâ€œè´ªå¿ƒ+åç¼€å’Œâ€ï¼Œä½†æ ¸å¿ƒæœ¬è´¨å°±æ˜¯ï¼š
>
> - ç”¨ DP å€’æ¨ï¼ˆä»ä¸‹å¾€ä¸Šï¼‰ç®—å®‰å…¨èŒƒå›´
> - é¡ºæ¨ï¼ˆä»ä¸Šå¾€ä¸‹ï¼‰æ„é€ æœ€å°å­—å…¸åºç­”æ¡ˆ

```c++
#include <bits/stdc++.h>
using namespace std;

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);
    
    int T; 
    if (!(cin >> T)) return 0;
    while (T--) {
        long long N; 
        int M, K;
        cin >> N >> M >> K;

        vector<array<long long, 2>> changes(M);
        for (int i = 0; i < M; ++i) {
            long long minEven = (long long)LLONG_MAX;
            long long minOdd  = (long long)LLONG_MAX;
            long long maxEven = 0, maxOdd = 0; // ä¸ºäº†å– -max

            for (int j = 0; j < K; ++j) {
                long long a; cin >> a;
                if ((a & 1) == 0) {
                    minEven = min(minEven, a);
                    maxEven = max(maxEven, a);
                } else {
                    minOdd = min(minOdd, a);
                    maxOdd = max(maxOdd, a);
                }
            }
            // ä½ é€‰ Evenï¼šè‹¥Bessieå‡ºå¶æ•° -> +minEvenï¼›è‹¥å‡ºå¥‡æ•° -> -maxOdd
            long long worstIfEven = LLONG_MAX; //æœ€æƒ¨çš„æ•°
            if (minEven != LLONG_MAX) worstIfEven = min(worstIfEven, minEven);
            if (maxOdd  != 0)        worstIfEven = min(worstIfEven, -maxOdd);

            // ä½ é€‰ Oddï¼šè‹¥Bessieå‡ºå¥‡æ•° -> +minOddï¼›è‹¥å‡ºå¶æ•° -> -maxEven
            long long worstIfOdd = LLONG_MAX;
            if (minOdd  != LLONG_MAX) worstIfOdd = min(worstIfOdd, minOdd);
            if (maxEven != 0)         worstIfOdd = min(worstIfOdd, -maxEven);

            // è‹¥æŸç±»å®Œå…¨ä¸å­˜åœ¨ï¼ˆæ¯”å¦‚å‹æ ¹æ²¡æœ‰å¶æ•°/å¥‡æ•°ï¼‰ï¼Œé‚£ä¸€ä¾§çš„â€œå¯¹æ–¹å¯é€‰â€åˆ†æ”¯å°±ä¸å­˜åœ¨ï¼›
            // Python å†™æ³•ç”¨ min åˆå§‹åŒ–ä¸º +infï¼Œä¿æŒä¸€è‡´ï¼š
            if (worstIfEven == LLONG_MAX) worstIfEven = LLONG_MAX / 4; // ä¸ä¼šè¢«é€‰ä¸­
            if (worstIfOdd  == LLONG_MAX) worstIfOdd  = LLONG_MAX / 4;

            changes[i] = {worstIfEven, worstIfOdd};
        }

        // åç¼€æœ€åå’Œï¼šmin_psum[t] = min(0, max(changes[t]) + min_psum[t+1])
        vector<long long> min_psum(M + 1, 0);
        for (int t = M - 1; t >= 0; --t) {
            long long stepWorst = max(changes[t][0], changes[t][1]);
            if (stepWorst > (long long)1e18 / 2) stepWorst = 0; // é˜²æ­¢LLONG_MAXå½±å“
            min_psum[t] = min(0LL, stepWorst + min_psum[t + 1]);
        }

        if (N + min_psum[0] <= 0) {
            cout << -1 << "\n";
            continue;
        }

        vector<int> ans(M, 0); // 0: Even, 1: Odd
        for (int t = 0; t < M; ++t) {
            // å°è¯•å…ˆé€‰ Evenï¼šå¦‚æœé€‰ Even ä¹‹å + åç¼€æœ€åå’Œä¼š <= 0ï¼Œåˆ™ä¼šæ­»ï¼Œä¸å¯é€‰
            long long addEven = changes[t][0];
            if (addEven > (long long)1e18 / 2) addEven = 0; // åŒä¸Šä¿æŠ¤

            int pick = 0; // é»˜è®¤é€‰ Even
            if (N + addEven + min_psum[t + 1] <= 0) {
                pick = 1; // æ”¹é€‰ Odd
            }
            ans[t] = pick;

            long long delta = changes[t][pick];
            if (delta > (long long)1e18 / 2) delta = 0; // ä¿æŠ¤
            N += delta;
        }

        for (int i = 0; i < M; ++i) {
            if (i) cout << ' ';
            cout << (ans[i] == 0 ? "Even" : "Odd");
        }
        cout << "\n";
    }
    return 0;
}
```

### ğŸ’¡ æ€»ç»“åˆ†ç±»

| åˆ†ç±»æ–¹å‘     | å½’ç±»ç»“æœ                                |
| ------------ | --------------------------------------- |
| **ç®—æ³•ç±»å‹** | âœ… åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰ + æå°æå¤§åšå¼ˆåˆ¤æ–­     |
| **çŠ¶æ€ç±»å‹** | ä¸€ç»´åç¼€ DP (`min_psum[t]`)             |
| **é¢˜ç›®é£æ ¼** | åšå¼ˆ / å®‰å…¨ç­–ç•¥ / åŒºé—´é€’æ¨              |
| **æ€ç»´å±‚æ¬¡** | DP æ€æƒ³é¢˜ï¼Œè€Œä¸æ˜¯æ¨¡æ¿ DPï¼ˆå¦‚èƒŒåŒ…ã€LISï¼‰ |

### ğŸ“š ç±»æ¯”ç†è§£

è¿™é“é¢˜çš„ç»“æ„å’Œä»¥ä¸‹é¢˜å‹æ€è·¯ç±»ä¼¼ï¼š

- USACO Gold ç»å…¸åšå¼ˆé¢˜ *â€œCow Hopscotch (Game Theory DP)â€*
- Codeforces â€œParity Gameâ€ / â€œAvoid Losing Gameâ€ ç±»é—®é¢˜ï¼›
- åŠ¨æ€è§„åˆ’åˆ¤æ–­â€œæ˜¯å¦å­˜åœ¨å®‰å…¨åºåˆ—â€çš„é¢˜ç›®ã€‚
