## ğŸ“š USACOå¸¸è§çš„mapã€unordered_map

### ğŸ“Œ1ã€**map å’Œ unordered_map çš„å¯¹æ¯”**

| ç‰¹æ€§               | `map`ï¼ˆæœ‰åºï¼‰      | `unordered_mapï¼ˆæ— åºï¼‰` |
| ------------------ | ------------------ | ----------------------- |
| åº•å±‚é€»è¾‘           | çº¢é»‘æ ‘             | å“ˆå¸Œè¡¨                  |
| æ—¶é—´å¤æ‚åº¦         | æŸ¥æ‰¾/æ’å…¥ O(log n) | æŸ¥æ‰¾/æ’å…¥å¹³å‡ O(1)      |
| key æ˜¯å¦è‡ªåŠ¨æ’åºï¼Ÿ | âœ” æœ‰åºï¼ˆå‡åºï¼‰     | âœ˜ æ— åº                  |
| ç©ºé—´               | è¾ƒå°‘               | è¾ƒå¤š                    |

### ä»€ä¹ˆæ—¶å€™ç”¨ `map`ï¼Ÿ

- **éœ€è¦ key æ’åºçš„é¢˜**
- éœ€è¦ lower_bound/upper_boundï¼ˆæ¯”å¦‚åŒºé—´æŸ¥æ‰¾ï¼‰
- æ•°æ®é‡å¾ˆå¤§ä½†ä¸è¦æ±‚æé™é€Ÿåº¦
- æƒ³è¦ç»“æœæœ‰åºï¼ˆè¾“å‡ºé¡ºåºï¼‰

```c++
map<int, int> mp;  // è‡ªåŠ¨æŒ‰ key æ’åº
```

### ä»€ä¹ˆæ—¶å€™ç”¨ `unordered_map`ï¼Ÿ

- åªéœ€è¦æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨
- é¢‘ç‡ç»Ÿè®¡ï¼ˆfreq counterï¼‰
- key æ˜¯å­—ç¬¦ä¸²ã€å¤§æ•´æ•°ã€pair ç­‰
- å¸Œæœ›æœ€å¿«çš„å¹³å‡æ€§èƒ½

```c++
unordered_map<string, int> freq;
```

### âœ… 1. é¢‘ç‡ç»Ÿè®¡ï¼ˆfrequency countingï¼‰

```c++
unordered_map<int, int> cnt;
for (int x : arr) {
    cnt[x]++;
}
```

ç»Ÿè®¡å­—ç¬¦ä¸²ä¹Ÿä¸€æ ·ï¼š

```c++
#include<bits/stdc++.h>
using namespace std;
int main(){
    vector<string>arr={"apple","orange","apple","banana"};
    unordered_map<string, int> cnt;
    for (string s : arr) cnt[s]++;
    for (auto &pair : cnt) {
        cout << pair.first << ": " << pair.second << endl;
    }
}
```

### âœ… **2. åˆ¤æ–­æŸå…ƒç´ æ˜¯å¦å‡ºç°**

```c++
if (cnt.count(x)) {
    // å­˜åœ¨ x
}
```

### âœ… **3. éå†æ‰€æœ‰ key-value**

```c++
for (auto &p : cnt) {
    int key = p.first;
    int value = p.second;
}
```

### âœ… **4. map + æ’åºï¼ˆå¯¹ key æ’åºï¼‰**

```c++
map<int, int> mp; // æœ‰åº
for (auto &p : mp) {
    // è‡ªåŠ¨æŒ‰ key ä»å°åˆ°å¤§
}
```

### âœ… **5. å¤šé‡æ˜ å°„ï¼ˆkey â†’ vectorï¼‰**

é€‚ç”¨äºâ€œåˆ†ç»„ç»Ÿè®¡â€ç±»é¢˜ã€‚

```c++
unordered_map<int, vector<int>> g;
g[key].push_back(val);
```

### âœ… **6. å­—ç¬¦ä¸²æ˜ å°„ï¼ˆéå¸¸å¸¸è§ï¼‰**

```c++
unordered_map<string, int> id;
id["cow"] = 5;
```

### âœ… **7. pair æ˜ å°„ï¼ˆäºŒç»´ keyï¼‰**

```c++
unordered_map<long long, int> mp;
long long key = 1LL * x * 1e9 + y; // æ‰‹åŠ¨å“ˆå¸Œ
mp[key]++;
```

### âœ… **8. ç¦»æ•£åŒ– + map**

**ç¦»æ•£åŒ–ï¼ˆcoordinate compressionï¼‰ = æŠŠå·¨å¤§èŒƒå›´çš„å€¼ï¼Œæ˜ å°„æˆä» 0 å¼€å§‹çš„å°æ•´æ•°ã€‚**

ä¾‹å¦‚åŸæœ¬æœ‰å€¼ï¼š

```c++
[-2000000000, 10, 999999999]
```

èŒƒå›´å¤ªå¤§ï¼Œå¦‚æœä½ åšï¼š

- å¼€æ•°ç»„ arr[1e9]ï¼šç›´æ¥çˆ†ç‚¸
- æˆ–éœ€è¦æ’åº/ç»Ÿè®¡çš„æ—¶å€™ä¸æ–¹ä¾¿

æ‰€ä»¥æˆ‘ä»¬æŠŠå®ƒä»¬å‹ç¼©æˆï¼š

```c++
-2000000000 â†’ 0
10           â†’ 1
999999999    â†’ 2
```

**è¿™æ ·æ‰€æœ‰å€¼éƒ½å˜æˆå¯æ§çš„å°ä¸‹æ ‡ï¼ˆ0,1,2â€¦ï¼‰**

```c++
map<int, int> mp;
int id = 0;
for (int x : arr) {
    if (!mp.count(x)) mp[x] = id++;
}
```

è¿™æ®µä»£ç çš„ä½œç”¨å°±æ˜¯ï¼š

### ğŸ” **å¦‚æœ x ç¬¬ä¸€æ¬¡å‡ºç°**

â†’ ç»™å®ƒåˆ†é…ä¸€ä¸ªæ–°çš„ IDï¼ˆä» 0 å¼€å§‹ï¼‰
 â†’ ä¸‹æ¬¡é‡åˆ°ç›¸åŒ xï¼Œå°±å¤ç”¨è¿™ä¸ª IDã€‚

**mp[x] = id++** ä¿è¯äº†æ¯ä¸ªä¸åŒçš„æ•°åŒ¹é…åˆ°ä¸åŒçš„å°ç¼–å·ã€‚

âœ” æŠŠå¤§èŒƒå›´å€¼â†’æ¢æˆå°æ•´æ•°
 âœ” è‡ªåŠ¨æŒ‰ key æ’åº
 âœ” ä¸‹æ ‡ä» 0 åˆ° unique_count-1
 âœ” ç”¨äºåŒºé—´ã€æ ‘çŠ¶æ•°ç»„ã€æ‰«æçº¿ã€å›¾è®ºç­‰åœºæ™¯

> 2016 Dec Silver_1-Counting Haybales

***

### âœ… **9. map + lower_bound/upper_bound**

å› ä¸º `map` æ˜¯ **æœ‰åºï¼ˆçº¢é»‘æ ‘ï¼‰ç»“æ„**ï¼Œkey è‡ªåŠ¨æŒ‰å‡åºæ’åˆ—ã€‚

ç¬¬ä¸€ä¸ª â‰¥ x çš„ key â†’ `lower_bound`

ç¬¬ä¸€ä¸ª > x çš„ key â†’ `upper_bound`

### case 1ï¼šæ‰¾åˆ°ç¬¬ä¸€ä¸ª >= x çš„ keyï¼ˆæœ€å¸¸ç”¨åœºæ™¯ï¼‰**

æ¯”å¦‚ä½ æœ‰ä¸€äº›ç‰›çš„ä½ç½®ï¼Œéœ€è¦æ‰¾åˆ°ç¦»ä½ç½® x æœ€è¿‘çš„**å³ä¾§ç‰›**ã€‚

```c++
map<int, int> mp;  // key: ç‰›çš„ä½ç½®, val: å…¶ä»–ä¿¡æ¯
auto it = mp.lower_bound(x);
if (it != mp.end()) {
    cout << "ç¬¬ä¸€ä¸ª >= x çš„ä½ç½®æ˜¯ " << it->first << "\n";
}
```

### case **2ï¼šæ‰¾åˆ°ç¬¬ä¸€ä¸ª > x çš„ key**

å¸¸ç”¨äºå¤„ç†ä¸¥æ ¼åŒºé—´ï¼Œä¾‹å¦‚ (x, +âˆ)ã€‚

```c++
auto it = mp.upper_bound(x);
if (it != mp.end()) {
    cout << "ç¬¬ä¸€ä¸ª > x çš„ä½ç½®æ˜¯ " << it->first << "\n";
}
```

### **case 3ï¼šåœ¨æœ‰åº map ä¸­æ‰¾æŸä¸ªåŒºé—´å†…çš„ key**

æ¯”å¦‚ä½ æœ‰è‹¥å¹²å†œåœºç¼–å·ï¼Œæƒ³æ‰¾åˆ°åŒºé—´ [L, R] å†…æ‰€æœ‰çš„å†œåœºã€‚

```c++
auto it = mp.lower_bound(L);  // ç¬¬ä¸€ä¸ª >= L
while (it != mp.end() && it->first <= R) {
    cout << "å†œåœº: " << it->first << "\n";
    it++;
}
```

### case **4ï¼šæŸ¥æ‰¾æœ€æ¥è¿‘ x çš„ç‚¹ï¼ˆUSACO éå¸¸å¸¸è€ƒï¼‰**

ä¾‹å¦‚è¦æ‰¾è·ç¦»æŸä¸ªä½ç½®æœ€è¿‘çš„ç‰›ï¼š

```c++
auto it = mp.lower_bound(x);
int best=1e18;

// right side
if (it != mp.end())
    best = min(best, abs(it->first - x));

// left side
if (it != mp.begin()) {
    it--;
    best = min(best, abs(it->first - x));
}
```

***

### ğŸ“Œ 2ã€ä¼˜å…ˆé˜Ÿåˆ— priority_queue

ä¼˜å…ˆé˜Ÿåˆ—æ˜¯ä¸€ç§ç‰¹æ®Šçš„é˜Ÿåˆ—ï¼š

> **å–å‡ºçš„æ°¸è¿œæ˜¯â€œæœ€ä¼˜çš„é‚£ä¸ªå…ƒç´ â€ï¼ˆæœ€å¤§æˆ–æœ€å°ï¼‰**
>  è€Œä¸æ˜¯å…ˆè¿›å…ˆå‡ºã€‚

ä¼˜å…ˆé˜Ÿåˆ—åº•å±‚ä½¿ç”¨ **äºŒå‰å †ï¼ˆbinary heapï¼‰** å®ç°ã€‚

### ğŸ§ ä¸ºä»€ä¹ˆç«èµ›å–œæ¬¢ç”¨ä¼˜å…ˆé˜Ÿåˆ—ï¼Ÿ

å› ä¸ºå®ƒé€Ÿåº¦å¿«ï¼š

| æ“ä½œ               | æ—¶é—´å¤æ‚åº¦ |
| ------------------ | ---------- |
| æ’å…¥               | O(log n)   |
| å–æœ€å€¼             | O(log n)   |
| æŸ¥è¯¢æœ€å€¼ï¼ˆä¸åˆ é™¤ï¼‰ | O(1)       |

é€‚ç”¨äºï¼š

- æ‰¾å½“å‰æœ€å¤§çš„ / æœ€å°çš„
- åŠ¨æ€åŠ å…¥ã€åŠ¨æ€åˆ é™¤
- ä¸æ–­å–æœ€ä¼˜è§£ï¼ˆè´ªå¿ƒï¼‰

å±äº **USACO é“¶ç»„å¸¸ç”¨çš„æ•°æ®ç»“æ„**ã€‚

### â‘  é»˜è®¤ï¼šæœ€å¤§å †ï¼ˆå–æœ€å¤§å€¼ï¼‰

```c++
priority_queue<int> pq;

pq.push(5);
pq.push(1);
pq.push(10);

cout << pq.top();   // 10
pq.pop();           // åˆ é™¤ 10
```

### â‘¡ æœ€å°å †ï¼ˆUSACO æ›´å¸¸ç”¨ï¼‰

è¦å†™æ¯”è¾ƒå™¨ï¼š

```c++
priority_queue<int, vector<int>, greater<int>> pq;
//åˆ›å»ºä¸€ä¸ªä»¥ vector ä¸ºåº•å±‚å®¹å™¨ã€å­˜ intã€å¹¶æŒ‰ç…§å°çš„ä¼˜å…ˆçº§åœ¨ä¸Šé¢çš„â€œæœ€å°å †â€ã€‚
```

ç°åœ¨ `top()` å°±æ˜¯**æœ€å°å€¼**ã€‚

### â‘¢ å­˜ pairï¼ˆæŒ‰ç¬¬ä¸€ä¸ªæ’åºï¼‰

```c++
priority_queue<pair<int,int>> pq;  // é»˜è®¤æœ€å¤§å †
//æ¯”è¾ƒ first, è‹¥ç›¸åŒï¼Œå†æ¯”è¾ƒ second
```

### â‘£ æœ€å°å † + pairï¼ˆç«èµ›å¸¸ç”¨ï¼‰

```c++
priority_queue<
    pair<int,int>,
    vector<pair<int,int>>,
    greater<pair<int,int>>
> pq;
```

### ğŸ‘‰ ä¼˜å…ˆé˜Ÿåˆ—åœ¨ USACO é“¶ç»„çš„å…¸å‹ç”¨é€”

### â‘  è´ªå¿ƒï¼ˆé¢‘ç‡ or æƒé‡æœ€å¤§/æœ€å°ï¼‰

ä¾‹å¦‚ï¼š

- é€‰å½“å‰â€œæœ€ç´§æ€¥â€çš„ä»»åŠ¡
- é€‰å½“å‰â€œæœ€å°ä»£ä»·â€çš„æ“ä½œ
- é€‰å½“å‰â€œæœ€å¤§äº§é‡â€
- å †æ¨¡æ‹Ÿè°ƒåº¦ï¼ˆschedule simulationï¼‰

### â‘¡ K å° / K å¤§å…ƒç´ 

#### æƒ…å†µä¸€ï¼š**å·²ç»æœ‰å…¨éƒ¨æ•°æ®ï¼Œåªæ˜¯æƒ³æ‹¿å‡º K ä¸ªæœ€å° / æœ€å¤§**

è¿™æ—¶å€™æœ€ç®€å•çš„æƒ³æ³•å°±æ˜¯ï¼š

- **K ä¸ªæœ€å°**ï¼šç”¨**æœ€å°å †**ï¼Œå¼¹ K æ¬¡
- **K ä¸ªæœ€å¤§**ï¼šç”¨**æœ€å¤§å †**ï¼Œå¼¹ K æ¬¡

å¯¹åº”ä»£ç ï¼š

```c++
// æ‰¾ K ä¸ªæœ€å°å…ƒç´ ï¼š
priority_queue<int, vector<int>, greater<int>> pq; // æœ€å°å †
for (int x : arr) pq.push(x);
for (int i = 0; i < K; i++) {
    cout << pq.top() << "\n"; // ä»å°åˆ°å¤§
    pq.pop();
}

// æ‰¾ K ä¸ªæœ€å¤§å…ƒç´ ï¼š
priority_queue<int> pq2; // æœ€å¤§å †
for (int x : arr) pq2.push(x);
for (int i = 0; i < K; i++) {
    cout << pq2.top() << "\n"; // ä»å¤§åˆ°å°
    pq2.pop();
}
```

#### æƒ…å†µäºŒï¼š**åœ¨çº¿ç»´æŠ¤â€œå‰ K å¤§ / å‰ K å°â€ï¼ˆæ•°æ®æµ/åªç•™ K ä¸ªï¼‰**

ä½†åœ¨ç®—æ³•é¢˜é‡Œï¼Œæ›´å¸¸è§çš„æ˜¯è¿™ç§æ¨¡å¼ï¼š

> æ•°æ®å¾ˆå¤šï¼Œåªæƒ³**ä¿ç•™ K ä¸ªæœ€ä¼˜çš„**ï¼Œä¸æƒ³å­˜å…¨éƒ¨ã€‚

è¿™æ—¶å€™å¸¸ç”¨çš„æŠ€å·§æ˜¯ï¼š

### â­ ä¿ç•™ K ä¸ª**æœ€å¤§**å€¼ï¼ˆTop K largestï¼‰

ç”¨ **â€œæœ€å°å † + åªå­˜ K ä¸ªâ€**ï¼š

```c++
priority_queue<int, vector<int>, greater<int>> pq; // æœ€å°å †

for (int x : arr) {
    if ((int)pq.size() < K) pq.push(x);         // å…ˆå¡«æ»¡
    else if (x > pq.top()) {                    // æ¯”å †é¡¶ï¼ˆå½“å‰ç¬¬ K å¤§ï¼‰æ›´å¤§
        pq.pop();
        pq.push(x);
    }
}
// æœ€å pq é‡Œæ˜¯â€œå‰ K å¤§â€ï¼Œå †é¡¶æ˜¯â€œç¬¬ K å¤§ï¼ˆæœ€å°çš„é‚£ä¸ªï¼‰â€
```

### â­ ä¿ç•™ K ä¸ª**æœ€å°**å€¼ï¼ˆTop K smallestï¼‰

ç”¨ **â€œæœ€å¤§å † + åªå­˜ K ä¸ªâ€**ï¼š

```c++
priority_queue<int> pq; // æœ€å¤§å †

for (int x : arr) {
    if ((int)pq.size() < K) pq.push(x);
    else if (x < pq.top()) {   // æ¯”å½“å‰æœ€å¤§çš„å°
        pq.pop();
        pq.push(x);
    }
}
// æœ€å pq é‡Œæ˜¯â€œå‰ K å°â€ï¼Œå †é¡¶æ˜¯â€œç¬¬ K å°é‡Œæœ€å¤§çš„é‚£ä¸ªâ€
```

åœ¨**è¿™ç§â€œåªç»´æŠ¤å‰ K ä¸ªâ€çš„å¥—è·¯**é‡Œï¼š

- **å‰ K å¤§** â†’ ç”¨æœ€å°å †ï¼ˆæˆ‘ä¹‹å‰å†™çš„æ˜¯è¿™ä¸ªæ€è·¯ï¼‰
- **å‰ K å°** â†’ ç”¨æœ€å¤§å †

### â‘¢ å¤šè·¯åˆå¹¶ï¼ˆk-way mergeï¼‰

ä¾‹å¦‚æœ‰å¤šæ¡å‡åºåºåˆ—ï¼Œè¦åˆå¹¶æˆä¸€ä¸ªåºåˆ—
 â†’ æŠŠæ¯ä¸€æ¡çš„ç¬¬ä¸€ä¸ªæ”¾å…¥æœ€å°å † â†’ æ¯æ¬¡å–æœ€å° â†’ æ¨å…¥ä¸‹ä¸€é¡¹
 ï¼ˆå’Œåˆå¹¶ k ä¸ªæœ‰åºé“¾è¡¨ä¸€ä¸ªæ€è·¯ï¼‰

### â‘£ åŠ¨æ€ç»´æŠ¤æœ€ä¼˜å€¼ï¼ˆå…¸å‹é“¶ç»„å¥—è·¯ï¼‰

ä¾‹å¦‚â€œæ¯æ¬¡å–æœ€å¤§å€¼ï¼Œåšä¸€äº›æ“ä½œï¼Œå†æ”¾å›å»â€ã€‚

```
push â†’ top â†’ pop â†’ push â†’ top â†’ pop â†’ â€¦
```

ä¼˜å…ˆé˜Ÿåˆ—ç‰¹åˆ«é€‚åˆè¿™ç§å¾ªç¯ã€‚

***

## ğŸŒ² ä»€ä¹ˆæ˜¯å›¾è®ºï¼ˆGraph Theoryï¼‰ï¼Ÿ

**å›¾è®º = ç ”ç©¶â€œç‚¹ + è¾¹â€ä¹‹é—´å…³ç³»çš„æ•°å­¦å’Œç®—æ³•å­¦ç§‘ã€‚**

ä¸€ä¸ªå›¾åŒ…å«ï¼š

- **ç‚¹ï¼ˆnodes / verticesï¼‰**
- **è¾¹ï¼ˆedgesï¼‰**ï¼šè¿æ¥ç‚¹ä¸ç‚¹

å°±åƒä½ åœ¨åœ°å›¾ã€ç¤¾äº¤ç½‘ç»œã€ç”µè·¯å›¾ä¸Šçœ‹åˆ°çš„ä¸€æ ·ã€‚

ä¾‹å¦‚ï¼š

```
A -- B -- C
|         |
D ------- E
```

è¿™æ˜¯ä¸€ä¸ªå›¾ï¼Œ5 ä¸ªèŠ‚ç‚¹ã€5 æ¡è¾¹ã€‚

## ğŸ§  å›¾è®ºèƒ½è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ

å›¾è®ºç”¨æ¥è§£å†³å„ç§â€œè¿æ¥å…³ç³»â€çš„é—®é¢˜ï¼Œä¾‹å¦‚ï¼š

- ä¸¤ç‚¹ä¹‹é—´èƒ½å¦åˆ°è¾¾ï¼Ÿ
- åˆ°è¾¾éœ€è¦å‡ æ­¥ï¼Ÿæœ€çŸ­è·¯å¾„ï¼Ÿ
- æœ‰å“ªäº›è¿é€šåŒºåŸŸï¼Ÿ
- ç½‘ç»œæ˜¯å¦æœ‰ç¯ï¼Ÿ
- å“ªäº›èŠ‚ç‚¹ä¹‹é—´å¿…é¡»åœ¨åŒä¸€ä¸ªé›†åˆï¼Ÿ
- æ ‘å½¢ç»“æ„å¦‚ä½•éå†ï¼Ÿ

## ğŸ“Š å›¾è®ºä¸­çš„å¸¸è§å›¾ç±»å‹

### **â‘  æ— å‘å›¾ï¼ˆundirected graphï¼‰**

A-B å’Œ B-A æ˜¯ä¸€æ ·çš„ï¼ˆåŒå‘ï¼‰ã€‚

### **â‘¡ æœ‰å‘å›¾ï¼ˆdirected graphï¼‰**

A â†’ B å’Œ B â†’ A ä¸ä¸€æ ·ã€‚

### **â‘¢ åŠ æƒå›¾ï¼ˆweighted graphï¼‰**

æ¯æ¡è¾¹æœ‰æƒé‡ï¼Œä¾‹å¦‚è·ç¦»ã€æ—¶é—´ã€‚

### **â‘£ æ ‘ï¼ˆtreeï¼‰**

- æ²¡æœ‰ç¯
- N ä¸ªç‚¹æœ‰ N-1 æ¡è¾¹
- ä»»æ„ä¸¤ç‚¹åªæœ‰å”¯ä¸€ä¸€æ¡è·¯å¾„

æ ‘æ˜¯å›¾çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µã€‚

## ğŸ¯ å›¾å¸¸ç”¨çš„å»ºå›¾æ–¹å¼

USACO ä¸­æœ€å¸¸ç”¨çš„æ˜¯ **é‚»æ¥è¡¨ï¼ˆadj listï¼‰**ï¼š

```c++
vector<vector<int>> g(n);
g[u].push_back(v);
g[v].push_back(u);   // å¦‚æœæ˜¯æ— å‘å›¾
```

å¦ä¸€ç§é¢†æ¥çŸ©é˜µï¼Œ**ç”¨ä¸€ä¸ª NÃ—N çš„çŸ©é˜µè¡¨ç¤ºç‚¹ä¸ç‚¹ä¹‹é—´æ˜¯å¦æœ‰è¾¹ã€‚**

å¦‚æœå›¾ä¸­æœ‰ N ä¸ªç‚¹ï¼ˆç¼–å· 0~N-1ï¼‰ï¼Œé‚£ä¹ˆé‚»æ¥çŸ©é˜µ `adj` æ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼š

```C++
adj[i][j] = 1  è¡¨ç¤º i ä¸ j æœ‰è¾¹  
adj[i][j] = 0  è¡¨ç¤º i ä¸ j æ²¡æœ‰è¾¹
```

å¦‚æœæ˜¯æœ‰æƒå›¾ï¼Œå¯ä»¥å†™æˆï¼š

```c++
adj[i][j] = è¾¹çš„æƒé‡
adj[i][j] = 0 æˆ– INF â†’ æ²¡æœ‰è¾¹
```

## ğŸ§© å›¾è®ºçš„æ ¸å¿ƒç®—æ³•

ğŸŸ¢ **1. BFSï¼ˆå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼‰**

ğŸŸ¢ **2. DFSï¼ˆæ·±åº¦ä¼˜å…ˆæœç´¢ï¼‰**

ğŸŸ¢ **3. Flood Fillï¼ˆæŸ“è‰²ï¼‰**

- è®¡ç®—å²›å±¿æ•°é‡
- æ ‡è®°ä¸€ç‰‡åŒºåŸŸ
- ç»Ÿè®¡è¿é€šå—é¢ç§¯

ğŸŸ¢ **4. Union-Findï¼ˆå¹¶æŸ¥é›†ï¼‰**

- åˆ¤æ–­ä¸¤ç‚¹æ˜¯å¦åœ¨åŒä¸€é›†åˆ
- åˆå¹¶é›†åˆ
- ç»Ÿè®¡è¿é€šæ•°é‡

ğŸŸ¡ **5. ç®€å•æ ‘è®º**

### ğŸ“Œ **Flood Fill çš„æ ¸å¿ƒé€»è¾‘**

Flood Fill = é€šè¿‡ DFS/BFS ä»èµ·ç‚¹æŠŠæ•´å—è¿é€šåŒºåŸŸå…¨éƒ¨è®¿é—®ã€‚

å‡è®¾åœ°å›¾å¦‚ä¸‹æ‰€ç¤ºï¼Œæƒ³æ‰¾æ‰€æœ‰ â€œ#â€ çš„è¿é€šå—æ•°é‡ã€‚

```c++
....#.
...##.
.#....
.###..
```

ä»æ¯ä¸ªæœªè®¿é—®çš„ "#" å¼€å§‹ï¼š

1. DFS/BFS éå†æ•´å—åŒºåŸŸ
2. æŠŠæ‰€æœ‰å±äºè¿™å—çš„ç‚¹æ ‡è®°ä¸º visited
3. è®¡æ•° +1ï¼ˆä»£è¡¨å‘ç°æ–°çš„åŒºåŸŸï¼‰

```c++
int n, m;
vector<string> grid;
bool vis[1005][1005];

int dx[4] = {1, -1, 0, 0};
int dy[4] = {0, 0, 1, -1};

void dfs(int x, int y) {
    vis[x][y] = true;

    for (int k = 0; k < 4; k++) {
        int nx = x + dx[k];
        int ny = y + dy[k];

        if (nx < 0 || nx >= n || ny < 0 || ny >= m) continue;
        if (vis[nx][ny]) continue;
        if (grid[nx][ny] != '#') continue;

        dfs(nx, ny);
    }
}
//
int cnt = 0;
for (int i = 0; i < n; i++) {
    for (int j = 0; j < m; j++) {
        if (grid[i][j] == '#' && !vis[i][j]) {
            dfs(i, j);  // æ ‡è®°æ•´å—åŒºåŸŸ
            cnt++;      // æ‰¾åˆ°ä¸€å—æ–°çš„
        }
    }
}
```

### ğŸ“Œ Union-Find / Disjoint Set Unionï¼ŒDSUï¼ˆå¹¶æŸ¥é›†ï¼‰

##### **å¹¶æŸ¥é›†æ˜¯ä¸€ç§ç”¨æ¥ç®¡ç†â€œå¤šä¸ªä¸ç›¸äº¤é›†åˆâ€çš„æ•°æ®ç»“æ„ã€‚**

å®ƒæ”¯æŒä¸¤ä¸ªæ ¸å¿ƒæ“ä½œï¼š

1. **Findï¼ˆæŸ¥æ‰¾ï¼‰**
    æ‰¾åˆ°æŸä¸ªå…ƒç´ æ‰€å±é›†åˆçš„â€œä»£è¡¨â€ï¼ˆä¹Ÿå«æ ¹ rootï¼‰
2. **Unionï¼ˆåˆå¹¶ï¼‰**
    æŠŠä¸¤ä¸ªé›†åˆåˆå¹¶æˆä¸€ä¸ªé›†åˆ

##### ç®€å•ç†è§£ï¼š

> **å¹¶æŸ¥é›† = åŠ¨æ€ç®¡ç†â€œè°å’Œè°åœ¨ä¸€ç»„â€çš„ç¥å™¨**

åœ¨å›¾è®ºé‡Œå®ƒæœ€å¸¸ç”¨äºï¼š

- åˆ¤æ–­ä¸¤ä¸ªç‚¹æ˜¯å¦è¿é€š
- åŠ¨æ€åŠ è¾¹
- è¿é€šå—æ•°é‡ç»Ÿè®¡
- Kruskalï¼ˆæœ€å°ç”Ÿæˆæ ‘ï¼ŒGold ä¸­æ›´å¸¸è§ï¼‰

##### å¹¶æŸ¥é›†çš„æ ¸å¿ƒæ€æƒ³

æ¯ä¸ªé›†åˆåƒä¸€æ£µå°æ ‘ï¼Œæ¯æ£µæ ‘æœ‰ä¸€ä¸ªæ ¹ï¼ˆrootï¼‰
 `find(x)` å°±æ˜¯æ‰¾åˆ°è¿™æ£µæ ‘çš„æ ¹ã€‚

åˆå¹¶ä¸¤ä¸ªé›†åˆï¼ˆunionï¼‰å°±æ˜¯ï¼š
 è®©ä¸€ä¸ªæ ‘çš„æ ¹æŒ‡å‘å¦ä¸€ä¸ªæ ‘çš„æ ¹ã€‚

ä¸ºäº†æ›´å¿«ï¼Œå®ƒä¼šåšä¸¤ä»¶ä¼˜åŒ–ï¼š

1. **è·¯å¾„å‹ç¼©ï¼ˆPath Compressionï¼‰**
2. **æŒ‰ç§©åˆå¹¶ï¼ˆUnion by Rank / Sizeï¼‰**

è¿™ä¿è¯æ•ˆç‡éå¸¸å¿«ï¼Œå‡ ä¹æ˜¯ O(1)ã€‚

<img src="/Users/mingoo/Desktop/Python-AmazingX/images/10.png" alt="10" style="zoom:50%;" />

### ğŸ§© å¹¶æŸ¥é›†çš„ä¸‰å¤§æ“ä½œ

### â‘  initianize **åˆå§‹åŒ–**

ä¸€å¼€å§‹ï¼Œæ¯ä¸ªå…ƒç´ è‡ªå·±æ˜¯ä¸€ä¸ªé›†åˆã€‚

```c++
for (int i = 0; i < n; i++)
    parent[i] = i;    // æ¯ä¸ªç‚¹éƒ½æ˜¯è‡ªå·±çš„çˆ¶äº²
    size[i] = 1;      // æ¯ä¸ªé›†åˆå¤§å°ä¸º 1
```

### â‘¡ **Findï¼ˆæŸ¥æ ¹ï¼‰**

```C++
int find(int x) {
    if (parent[x] != x)
        parent[x] = find(parent[x]);    // è·¯å¾„å‹ç¼©
    return parent[x];
}
```

### è·¯å¾„å‹ç¼©æ˜¯ä»€ä¹ˆï¼Ÿ

è®©æ¯ä¸€æ¬¡ find éƒ½é¡ºä¾¿æŠŠèŠ‚ç‚¹ç›´æ¥è¿åˆ°æ ¹ã€‚è¿™æ ·æ ‘çš„æ·±åº¦è¶Šæ¥è¶Šå¹³ï¼ŒæŸ¥æ‰¾å‡ ä¹å˜æˆ O(1)ã€‚

### â‘¢ **Unionï¼ˆåˆå¹¶ä¸¤ä¸ªé›†åˆï¼‰**

æŠŠ A æ‰€å±çš„é›†åˆ å’Œ B æ‰€å±çš„é›†åˆè¿æ¥èµ·æ¥ï¼š

```c++
void unite(int a, int b) {
    a = find(a);
    b = find(b);
    if (a == b) return; // å·²ç»åœ¨åŒä¸€ä¸ªé›†åˆ

    if (size[a] < size[b]) swap(a, b); // æŒ‰å¤§å°åˆå¹¶ï¼Œè®©æ›´å°çš„æ ‘è¿åˆ°æ›´å¤§çš„æ ‘
    parent[b] = a;
    size[a] += size[b];
}
```

### å¦‚ä½•åˆ¤æ–­ä¸¤ç‚¹æ˜¯å¦è¿é€šï¼Ÿ

åªéœ€ check æ ¹æ˜¯å¦ä¸€æ ·ï¼š

```c++
if (find(a) == find(b)) {
    // è¿é€š
}
```

### ğŸ§± æ¨¡æ¿ä»£ç ï¼ˆC++ï¼‰

```c++
struct DSU {
    vector<int> parent, sz;

    DSU(int n) {
        parent.resize(n);
        sz.resize(n, 1);
        for (int i = 0; i < n; i++)
            parent[i] = i;
    }

    int find(int x) {
        if (parent[x] != x)
            parent[x] = find(parent[x]);
        return parent[x];
    }

    void unite(int a, int b) {
        a = find(a);
        b = find(b);
        if (a == b) return;
        if (sz[a] < sz[b]) swap(a, b);
        parent[b] = a;
        sz[a] += sz[b];
    }

    bool same(int a, int b) {
        return find(a) == find(b);
    }
};
```

### ğŸ¯ USACO å¹¶æŸ¥é›†æœ€å¸¸ç”¨çš„ **5 ç§é¢˜å‹**

1. ### åŠ¨æ€è¿é€šæ€§ï¼ˆDynamic Connectivityï¼‰â€” åˆ¤æ–­æ˜¯å¦è¿é€š

> ä¸æ–­ union(a, b)ï¼Œç„¶åé—®ä½  x å’Œ y æ˜¯å¦å±äºåŒä¸€ä¸ªé›†åˆã€‚

### å…¸å‹ä»»åŠ¡ï¼š

- åˆ¤æ–­é“è·¯ä¸¤ç‚¹æ˜¯å¦å¯è¾¾
- åˆ¤æ–­ä¸¤å¤´ç‰›æ˜¯å¦åœ¨åŒä¸€ç¾¤
- åˆ¤æ–­ä¸¤ä¸ªç‰§åœºæ˜¯å¦è¿æ¥
- åˆ¤æ–­ä¸¤æ¡è·¯å¾„æ˜¯å¦ç­‰ä»·

### ä¸ºä»€ä¹ˆç”¨ DSUï¼Ÿ

- å› ä¸º **find(x)==find(y)** åˆ¤æ–­è¿é€šæœ€å¿«
- æ¯” DFS / BFS æ›´å¿«ï¼ˆO(Î±(n)) â‰ˆ O(1)ï¼‰

### ç¤ºä¾‹ï¼š

```c++
union(1,2)
union(2,3)
query: 1 å’Œ 3 è¿é€šå—ï¼Ÿ â†’ YES
```

> USACO 2020 January Silver Problem 3-Wormhole Sort

```C++
//ç‰› i ç°åœ¨åœ¨å“ªä¸ªä½ç½®â€ å’Œ â€œå®ƒæœ€ç»ˆè¦ç«™çš„ä½ç½® iâ€ æ˜¯å¦å±äºåŒä¸€è¿é€šå—
//æ‰¾ä¸€ä¸ªå€¼ Xï¼Œä½¿å¾— åªå…è®¸ä½¿ç”¨å®½åº¦ â‰¥ X çš„è™«æ´æ—¶ï¼Œä»ç„¶èƒ½æŠŠæ‰€æœ‰ç‰›æ’å¥½ï¼›å¹¶ä¸”è¿™ä¸ª X è¦å°½å¯èƒ½å¤§ã€‚
#include <bits/stdc++.h>
using namespace std;

struct DSU {
    vector<int> parent, sz;
    DSU(int n = 0) {
        init(n);
    }
    void init(int n) {
        parent.resize(n + 1);
        sz.assign(n + 1, 1);
        for (int i = 1; i <= n; i++) parent[i] = i;
    }
    int find(int x) {
        if (parent[x] != x) parent[x] = find(parent[x]);
        return parent[x];
    }
    void unite(int a, int b) {
        a = find(a); b = find(b);
        if (a == b) return;
        if (sz[a] < sz[b]) swap(a, b);
        parent[b] = a;
        sz[a] += sz[b];
    }
};

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);

    int N, M;
    if (!(cin >> N >> M)) return 0;
    vector<int> p(N + 1);
    bool sorted = true;
    for (int i = 1; i <= N; i++) {
        cin >> p[i];
        if (p[i] != i) sorted = false;
    }

    vector<tuple<int,int,int>> edges; // (w, a, b)
    edges.reserve(M);
    int a, b, w;
    int maxW = 0;
    for (int i = 0; i < M; i++) {
        cin >> a >> b >> w;
        edges.push_back({w, a, b});
        maxW = max(maxW, w);
    }

    if (sorted) {
        cout << -1 << "\n";
        return 0;
    }

    DSU dsu(N);

    auto check = [&](int X) -> bool {
        dsu.init(N);
        for (auto &e : edges) {
            int ww, x, y;
            ww = get<0>(e);
            x  = get<1>(e);
            y  = get<2>(e);
            if (ww >= X) dsu.unite(x, y);
        }
        for (int i = 1; i <= N; i++) {
            if (dsu.find(i) != dsu.find(p[i]))
                return false;
        }
        return true;
    };

    int lo = 1, hi = maxW, ans = 0;
    while (lo <= hi) {
        int mid = lo + (hi - lo) / 2;
        if (check(mid)) {
            ans = mid;      // mid å¯è¡Œï¼Œæƒ³è¦æ›´å¤§
            lo = mid + 1;
        } else {
            hi = mid - 1;   // mid å¤ªå¤§ï¼Œç¼©å°
        }
    }

    cout << ans << "\n";
    return 0;
}

//å¹¶æŸ¥é›†
//äºŒåˆ†æŸ¥æ‰¾
//tupleã€vectorç”¨æ³•
```

### **2. è¿é€šå—ç»Ÿè®¡ï¼ˆConnected Componentsï¼‰**

ç»Ÿè®¡ä¸€å…±æœ‰å¤šå°‘ä¸ªé›†åˆï¼Œæˆ–è€…æ¯ä¸ªé›†åˆå¤§å°æ˜¯å¤šå°‘ã€‚

### åœºæ™¯ï¼š

- ç»Ÿè®¡æœ‰å¤šå°‘ä¸ªç‹¬ç«‹çš„ç»„
- ç»Ÿè®¡æ¯ç»„çš„å¤§å°ï¼ˆsize æ•°ç»„ï¼‰
- ç‰§åœºé‡Œæœ‰å‡ ç¾¤ç‰›
- æœ‰å‡ ä¸ªè¿é€šå­å›¾

### ä½¿ç”¨æ–¹æ³•ï¼š

æ¯æ¬¡ union åˆå¹¶, æœ€åç»Ÿè®¡æ ¹èŠ‚ç‚¹æ•°é‡å³å¯ã€‚

### ä¸ºä»€ä¹ˆ DSU å¾ˆå¼ºï¼Ÿ

- è‡ªåŠ¨ç»´æŠ¤é›†åˆåˆå¹¶
- ç›´æ¥ç»Ÿè®¡æ ¹èŠ‚ç‚¹æ•°é‡ â†’ O(n)

> USACO 2016 US Open Silver Problem 3-Closing the Farm

### **3. ç­‰ä»·å…³ç³»å¤„ç†ï¼ˆEquivalence Classesï¼‰â€” åˆ†ç»„é—®é¢˜**

USACO å¾ˆå–œæ¬¢è¿™ç§é¢˜ï¼š

> A å’Œ B è¦æ”¾åœ¨ä¸€ç»„
>  C å’Œ D è¦æ”¾åœ¨ä¸€ç»„
>  ä»–ä»¬æ˜¯å¦ä¼šå†²çªï¼Ÿ

æ¯”å¦‚ï¼š

- â€œè¿™ä¸¤å¤´ç‰›å¿…é¡»åœ¨ä¸€èµ·â€
- â€œè¿™äº›ç¼–å·å±äºåŒä¸€ç±»å‹â€
- â€œæŸäº›æ¡ä»¶è®©ä¸¤ä¸ªäººå¿…é¡»ç­‰ä»·â€

### å…¸å‹ä¾‹å­ï¼ˆæŠ½è±¡ï¼‰ï¼š

```c++
1 ~ 3   (1 å’Œ 3 åŒç»„)
3 ~ 5
é—®ï¼š1 å’Œ 5 æ˜¯å¦åŒç»„ï¼Ÿï¼ˆYESï¼‰
```

> USACO 2016 December Gold Problem 1-Moocast

### **4. Kruskal / æœ€å°ç”Ÿæˆæ ‘çš„ç®€åŒ–ç‰ˆæœ¬**

è™½ç„¶å®Œæ•´çš„ MST é€šå¸¸æ˜¯ **Gold çº§**ï¼Œä½† Silver ä¼šå‡ºç°ï¼š

### åœºæ™¯ï¼š

- ç»™ä¸€å †è¾¹ï¼ŒæŒ‰æŸç§é¡ºåºæ’åº
- æŒ‰é¡ºåºåŠ å…¥è¾¹
- ç”¨ DSU åˆ¤æ–­æ˜¯å¦å½¢æˆç¯
- æˆ–ç»Ÿè®¡æŸä¸ªç»“æ„

æ¯”å¦‚ï¼š

```
å¦‚æœè¾¹ (u,v) å·²ç»è¿é€šï¼Œåˆ™è·³è¿‡ï¼ˆå¦åˆ™æˆç¯ï¼‰
å¦åˆ™åˆå¹¶
```

å®Œå…¨å°±æ˜¯ Kruskal çš„æ ¸å¿ƒæ€æƒ³ã€‚

### ä¸ºä»€ä¹ˆç”¨ DSUï¼Ÿ

å› ä¸ºä½ éœ€è¦å¿«é€Ÿåˆ¤æ–­ï¼š

- **åŠ å…¥ä¸€æ¡è¾¹åæ˜¯å¦ä¼šäº§ç”Ÿç¯**ï¼Ÿ
   â†’ find(u)==find(v) å°±ä¼šäº§ç”Ÿç¯
- å¦‚æœä¸ä¼šï¼Œå°±åˆå¹¶é›†åˆ

USACO Silver å¾ˆå–œæ¬¢è¿™ç§è½»åº¦ MST åˆ¤æ–­é¢˜ã€‚

> USACO 2015 February Silver Problem 3-Superbullï¼ˆ MST + DSU çš„ä»£è¡¨é¢˜ï¼‰

### **5. ç¦»çº¿æŸ¥è¯¢ï¼ˆOffline Queriesï¼‰â€” å€’åºå¤„ç†é—®é¢˜**

### åœºæ™¯ï¼š

- è¾¹è¢«â€œåˆ é™¤ / å¡Œé™· / å…³é—­â€
- é—®ä½ éšç€æ—¶é—´å€’é€€ï¼Œä»€ä¹ˆæ—¶å€™å˜å¾—è¿é€š
- è®¸å¤šæ¡ä»¶ä¸‹çš„â€œå…ˆåˆ åé—®â€

å¤„ç†æ–¹æ³•ï¼š

> **æ­£å‘éš¾ â†’ å€’åºå˜æˆ union**

æ¯”å¦‚ï¼š

- åŸé—®é¢˜ï¼šä¸æ–­åˆ é™¤é“è·¯ï¼Œè¯¢é—®æ˜¯å¦è¿é€š
- å€’åºå¤„ç†ï¼šä»å…¨éƒ¨æ–­å¼€å¼€å§‹ï¼Œå€’ç€åŠ é“è·¯

è¿™æ˜¯ DSU éå¸¸å¼ºçš„æŠ€å·§ï¼Œç«èµ›å¸¸ç”¨ã€‚

### ä¸ºä»€ä¹ˆæ˜¯ DSUï¼Ÿ

å› ä¸ºï¼š

- æ­£å‘åˆ é™¤å¾ˆéš¾ç»´æŠ¤è¿é€šæ€§
- åå‘åŠ å…¥éå¸¸ç®€å•ï¼ˆunionï¼‰

> USACO 2016 US Open Silver Problem 3-Closing the Farm
