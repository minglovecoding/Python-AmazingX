### USACO 2025 February Contest, Silver

### Problem 2. Vocabulary Quiz

### ğŸ§  ä¸€ã€ç†è§£é¢˜æ„

### âœ… 1. â€œæœ‰ 6 ä¸ªå•è¯ç¼–å·ä¸º 0â€¦5â€

> æ„æ€æ˜¯ç¨‹åºæ ¹æ®è¾“å…¥å…³ç³»æ„é€ å‡ºäº† 6 ä¸ªä¸åŒçš„å•è¯ï¼ˆå…¶ä¸­ç¬¬ 0 ä¸ªæ˜¯ç©ºä¸²ï¼‰ã€‚

ä¾‹å¦‚ï¼š

```
p = [0, 1, 2, 3, 4]
```

| å•è¯ç¼–å· | æ„é€ è§„åˆ™  | å†…å®¹ï¼ˆå½¢å¼åŒ–ï¼‰ |
| -------- | --------- | -------------- |
| 0        | ç©ºä¸²      | ""             |
| 1        | 0 + å­—æ¯a | a              |
| 2        | 1 + å­—æ¯b | ab             |
| 3        | 2 + å­—æ¯c | abc            |
| 4        | 3 + å­—æ¯d | abcd           |
| 5        | 4 + å­—æ¯e | abcde          |

------

### âœ… 2. â€œå•è¯ 5 æ˜¯å”¯ä¸€ä¸€ä¸ªä¸æ˜¯å¦ä¸€ä¸ªå•è¯çš„å‰ç¼€çš„å•è¯â€

è¿™å¥è¯å…¶å®åœ¨è¯´ï¼š

> åªæœ‰å•è¯ 5 ä¸æ˜¯ä»»ä½•å…¶ä»–å•è¯çš„å‰ç¼€ã€‚

æ¢å¥è¯è¯´ï¼š

- 0 æ˜¯ 1 çš„å‰ç¼€ï¼›
- 1 æ˜¯ 2 çš„å‰ç¼€ï¼›
- 2 æ˜¯ 3 çš„å‰ç¼€ï¼›
- 3 æ˜¯ 4 çš„å‰ç¼€ï¼›
- 4 æ˜¯ 5 çš„å‰ç¼€ï¼›
- ä½†æ˜¯ 5 æ²¡æœ‰è°ä»¥å®ƒå¼€å¤´ã€‚

ğŸ‘‰ æ‰€ä»¥ 5 æ˜¯ä¸€ç‰‡â€œå¶å­èŠ‚ç‚¹â€ğŸŒ¿ï¼ˆæ²¡æœ‰å­©å­ï¼‰ã€‚

------

### âœ… 3. â€œå› æ­¤å®ƒæ˜¯è¯åº“ä¸­å”¯ä¸€çš„å•è¯â€

è¯åº“ä¸­åªåŒ…å«é‚£äº›ã€Œä¸æ˜¯ä»»ä½•å•è¯å‰ç¼€ã€çš„å•è¯ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰å¶å­èŠ‚ç‚¹ã€‚
 ç”±äºåªæœ‰ 5 æ˜¯å¶å­ï¼Œæ‰€ä»¥è¯åº“ = {5}ã€‚

------

### âœ… 4. â€œä¸€èˆ¬åœ°è¯´ï¼Œä¸€æ—¦åº“ä¸­ä»…å‰©ä¸‹ä¸€ä¸ªå•è¯ï¼ŒElsie å°±ä¸å†éœ€è¦ä»»ä½•å­—ç¬¦ä»¥ç¡®å®šå®ƒã€‚â€

æ„æ€æ˜¯ï¼š

> å½“è¯åº“é‡Œåªå‰©ä¸€ä¸ªå•è¯æ—¶ï¼ŒElsie ä¸€å¬ Bessie è¦è¯»å“ªä¸ªå•è¯ï¼Œå°±å·²ç»èƒ½ç¡®å®šæ˜¯å“ªä¸€ä¸ªï¼Œä¸éœ€è¦å¬ä»»ä½•å­—æ¯ã€‚

ä¾‹å¦‚ï¼š

- å¦‚æœè¯åº“é‡Œè¿˜æœ‰å¤šä¸ªå•è¯ï¼Œæ¯”å¦‚ `{apple, application}`ï¼ŒElsie éœ€è¦å¬å‡ ä¸ªå­—æ¯åŒºåˆ†ï¼›
- ä½†å¦‚æœåªå‰©ä¸‹ `{apple}` ä¸€ä¸ªå•è¯ï¼Œé‚£ä¹ˆæ— è®º Bessie å¼€å£è¯´ä»€ä¹ˆï¼ŒElsie å·²ç»çŸ¥é“ç­”æ¡ˆå°±æ˜¯ â€œappleâ€ï¼Œæ‰€ä»¥æœ—è¯» 0 ä¸ªå­—ç¬¦å³å¯ã€‚

### ğŸ’¡ äºŒã€æ€è·¯

> æ ‘ç»“æ„æ¨¡æ‹Ÿ + å‰ç¼€åˆ¤å®š

### ğŸ§© 1ã€æ€è·¯ç®€åŒ–

é¢˜ç›®çœ‹ä¼¼è®²â€œå•è¯æœ—è¯»â€ï¼Œ
 å…¶å®åœ¨åšçš„äº‹æƒ…æ˜¯ï¼š

> æ„é€ å‡ºä¸€æ£µç”±å•è¯å½¢æˆçš„**æ ‘ç»“æ„ï¼ˆTrie çš„å‹ç¼©ç‰ˆï¼‰**ï¼Œ
>  ç„¶åä¾æ¬¡åˆ é™¤è¯åº“ä¸­çš„å¶å­èŠ‚ç‚¹ï¼Œ
>  è¾“å‡ºæ¯ä¸ªè¢«åˆ é™¤èŠ‚ç‚¹â€œè¢«å”¯ä¸€ç¡®å®šâ€æ—¶æ‰€éœ€çš„æ·±åº¦ã€‚

æ¢å¥è¯è¯´ï¼š

> æ¯ä¸ªå•è¯å°±æ˜¯æ ‘ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼›
>  ä¸€ä¸ªå•è¯æ˜¯å¦ä¸€ä¸ªå•è¯çš„å‰ç¼€ â‡” è¿™ä¸ªå•è¯æ˜¯å¦ä¸€ä¸ªèŠ‚ç‚¹çš„**ç¥–å…ˆ**ã€‚
>  æ‰€ä»¥ â€œä¸æ˜¯ä»»ä½•å•è¯å‰ç¼€çš„å•è¯â€ â‡” **æ ‘çš„å¶å­èŠ‚ç‚¹**ã€‚

### ğŸŒ³ 2ã€æ•°æ®ç»“æ„å»ºæ¨¡

###### é¢˜ç›®ç”¨ `p[i]` æ¥æè¿°å•è¯ç”Ÿæˆå…³ç³»ï¼š

- å•è¯ 0 æ˜¯ç©ºä¸²ï¼›
- å•è¯ `i` = å•è¯ `p[i]` + 1 ä¸ªæ–°å­—ç¬¦ï¼›
- æ‰€ä»¥ `p[i]` æ˜¯ `i` çš„çˆ¶èŠ‚ç‚¹ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬å¾—åˆ°ä¸€æ£µä»¥ 0 ä¸ºæ ¹çš„æ ‘ã€‚

### ğŸ§  3ã€å…³é”®è§‚å¯Ÿï¼š

###### â€œä¸æ˜¯å‰ç¼€çš„å•è¯â€ â‡” â€œæ ‘çš„å¶å­èŠ‚ç‚¹â€

- è‹¥æŸèŠ‚ç‚¹æœ‰å­èŠ‚ç‚¹ï¼Œåˆ™å®ƒæ˜¯åˆ«çš„å•è¯çš„å‰ç¼€ï¼›
- è‹¥æ²¡æœ‰å­èŠ‚ç‚¹ï¼ˆnum_child == 0ï¼‰ï¼Œåˆ™å®ƒæ˜¯è¯åº“çš„çœŸå®å•è¯ã€‚

é¢˜ç›®ç¬¬äºŒéƒ¨åˆ†çš„è¾“å…¥ï¼ˆM è¡Œï¼‰å°±æ˜¯è¿™äº›å¶å­çš„é¡ºåºã€‚

### âš™ï¸ 4ã€ç®—æ³•ç›®æ ‡è½¬åŒ–

##### é¢˜ç›®é—®ï¼š

> â€œæ¯æ¬¡æœ—è¯»ä¸€ä¸ªå•è¯ï¼ˆ=åˆ é™¤å¶å­ï¼‰æ—¶ï¼ŒElsie æœ€å°‘å¬å¤šå°‘ä¸ªå­—ç¬¦æ‰èƒ½å”¯ä¸€ç¡®å®šè¿™ä¸ªå•è¯ï¼Ÿâ€

å¯¹åº”åˆ°æ ‘çš„æ¨¡å‹å°±æ˜¯ï¼š

> æ¯æ¬¡åˆ é™¤ä¸€ä¸ªå¶å­èŠ‚ç‚¹æ—¶ï¼Œè¾“å‡ºå®ƒâ€œä¸å½“å‰æ ‘ä¸­å…¶ä»–å•è¯åˆ†æ­§çš„ä½ç½®æ·±åº¦â€ã€‚

### ğŸ” 5ã€æ ¸å¿ƒé€»è¾‘åˆ†æ

æœ—è¯»è¿‡ç¨‹å¯¹åº”äº**é€æ­¥å‰ªå»å¶å­èŠ‚ç‚¹**ã€‚
 æ¯æ¬¡æ“ä½œçš„é€»è¾‘å¦‚ä¸‹ï¼š

1. å½“å‰æœ—è¯»çš„å•è¯ = å½“å‰æ ‘çš„ä¸€ä¸ª**å¶å­èŠ‚ç‚¹ x**ï¼›
2. å¦‚æœå®ƒçš„çˆ¶èŠ‚ç‚¹ `P[x]` åªæœ‰å®ƒè¿™ä¸€ä¸ªå­©å­ï¼ˆ`num_child[P[x]] == 1`ï¼‰ï¼š
   - é‚£ä¹ˆæœ—è¯»å®Œåï¼Œçˆ¶èŠ‚ç‚¹ä¹Ÿä¼šå˜æˆæ–°çš„å¶å­ï¼›
   - Elsie ä¸éœ€è¦æœ—è¯»å®Œæ•´ä¸ªå•è¯ï¼Œå¯ä»¥â€œå‘ä¸Šåˆå¹¶â€ï¼Œç»§ç»­å¾€çˆ¶èŠ‚ç‚¹æ‰¾ï¼›
3. å¦‚æœçˆ¶èŠ‚ç‚¹è¿˜æœ‰åˆ«çš„å­©å­ï¼ˆæœ‰å…„å¼ŸèŠ‚ç‚¹ï¼‰ï¼Œé‚£ä¹ˆï¼š
   - æ­¤æ—¶æœ—è¯»å¿…é¡»åˆ°æ·±åº¦ `length[x]` æ‰èƒ½å”¯ä¸€ç¡®å®šï¼›
   - ç„¶ååˆ é™¤è¿™ä¸ªèŠ‚ç‚¹ï¼ˆçˆ¶èŠ‚ç‚¹å­©å­æ•° -1ï¼‰ã€‚

### ğŸ§® 6ã€ç®—æ³•å®ç°æ­¥éª¤

| æ­¥  éª¤ | æ“ä½œ                                              | è¯´æ˜                                                |
| ------ | ------------------------------------------------- | --------------------------------------------------- |
| 1      | è¯»å…¥ `N`ï¼Œå’Œæ•°ç»„ `P`                              | æ„å»ºæ ‘çš„çˆ¶å­å…³ç³»                                    |
| 2      | éå† 1..Nï¼Œè®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„ `length` å’Œ `num_child` | æ·±åº¦å’Œå­èŠ‚ç‚¹æ•°                                      |
| 3      | ç»Ÿè®¡å¶å­èŠ‚ç‚¹ä¸ªæ•° M                                | è¯åº“å¤§å°                                            |
| 4      | æŒ‰è¾“å…¥é¡ºåºä¾æ¬¡å¤„ç†æ¯ä¸ªå¶å­                        | æ¨¡æ‹Ÿæœ—è¯»è¿‡ç¨‹                                        |
| 5      | å¯¹æ¯ä¸ªæœ—è¯»èŠ‚ç‚¹æ‰§è¡Œ while å¾ªç¯ï¼š                   | è‹¥çˆ¶èŠ‚ç‚¹åªæœ‰å®ƒä¸€ä¸ªå­ â†’ å‘ä¸Šåˆå¹¶ï¼›å¦åˆ™è¾“å‡ºæ·±åº¦å¹¶å‰ªæ |
| 6      | è¾“å‡ºæ¯ä¸ªå•è¯çš„æœ—è¯»é•¿åº¦                            | å¯¹åº” Elsie å”¯ä¸€ç¡®å®šæ‰€éœ€å­—ç¬¦æ•°                       |

***

```c++
#include <bits/stdc++.h>
using namespace std;

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);

    int N;
    cin >> N;

    vector<int> P(N + 1);
    for (int i = 1; i <= N; i++)
        cin >> P[i];

    vector<int> num_child(N + 1, 0);
    vector<int> length(N + 1, 0);

    // è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„æ·±åº¦ä¸å­èŠ‚ç‚¹æ•°
    for (int i = 1; i <= N; i++) {
        length[i] = length[P[i]] + 1;
        num_child[P[i]]++;
    }

    // ç»Ÿè®¡å¶å­èŠ‚ç‚¹æ•°
    int M = 0;
    for (int i = 0; i <= N; i++) {
        if (num_child[i] == 0)
            M++;
    }

    // æ¨¡æ‹Ÿ M æ¬¡æ“ä½œ
    for (int _ = 0; _ < M; _++) {
        int x;
        cin >> x;

        while (true) {
            assert(num_child[x] == 0);  // å¿…é¡»æ˜¯å¶å­

            if (x == 0) {  // åˆ°è¾¾æ ¹èŠ‚ç‚¹
                cout << 0 << "\n";
                break;
            }

            if (num_child[P[x]] == 1) {
                x = P[x];
                num_child[x] = 0;
                continue;
            }

            cout << length[x] << "\n";
            num_child[P[x]]--;
            break;
        }
    }

    return 0;
}
```

***

### USACO 2025 February Contest, Bronze

### Problem 1. Astral Superposition

é¢˜æ„ï¼šç”»å¸ƒå¯¹ç§° + åŠ¨æ€å•ç‚¹ç¿»è½¬

æ€è·¯ï¼šæ ¸å¿ƒæ€è·¯æ˜¯æŠŠæ•´å¼  `NÃ—N`ç”»å¸ƒæŒ‰æ°´å¹³/å‚ç›´ä¸­çº¿çš„äºŒé‡å¯¹ç§°åˆ†æˆå¾ˆå¤šä¸ª4 å…ƒè½¨é“ï¼ˆorbitï¼‰æ¥ç‹¬ç«‹å¤„ç†ã€‚

### ğŸ“Œ å…³é”®è§‚å¯Ÿ

- ä»¥ä¸­çº¿ä¸ºç•Œï¼Œä»»æ„ä¸€ä¸ªæ ¼å­ `(i,j)` ï¼ŒåŠå®ƒå…³äºä¸¤æ¡ä¸­çº¿åå°„å¾—åˆ°çš„ 3 ä¸ªæ ¼å­ï¼š
  $$
  (i,j),\ (i,\,N-1-j),\ (N-1-i,\,j),\ (N-1-i,\,N-1-j)
  $$
  è¿™ 4 ä¸ªæ ¼å­æ„æˆä¸€ä¸ªè½¨é“ã€‚å› ä¸º `N` æ˜¯å¶æ•°ï¼Œæ²¡æœ‰æ ¼å­è½åœ¨ä¸­çº¿ä¸Šï¼Œæ‰€ä»¥æ¯ä¸ªè½¨é“æ°æœ‰ 4 ä¸ªæ ¼å­ï¼Œä¸åŒè½¨é“äº’ä¸ç›¸äº¤ï¼Œè¦†ç›–å…¨å›¾ã€‚

- é¢˜ç›®è¦æ±‚çš„â€œä»å³ä¸Šè±¡é™é•œåƒåˆ°å…¶å®ƒè±¡é™â€æœ¬è´¨ä¸Šè¦æ±‚ï¼šæ¯ä¸ªè½¨é“é‡Œçš„ 4 ä¸ªæ ¼å­æœ€ç»ˆå¿…é¡»ä¸€è‡´ï¼ˆè¦ä¹ˆå…¨æ˜¯â€˜#â€™ï¼Œè¦ä¹ˆå…¨æ˜¯â€˜.â€™ï¼‰ã€‚
   å› ä¸ºå³ä¸Šè±¡é™å†³å®šäº†è½¨é“çš„æœ€ç»ˆå–å€¼ï¼Œä½†å¯¹æ¯ä¸ªè½¨é“æˆ‘ä»¬éƒ½å¯ä»¥ç‹¬ç«‹é€‰æ‹©æˆâ€˜#â€™æˆ–â€˜.â€™ï¼Œäº’ä¸å½±å“ã€‚

### ğŸ“Œ æ¯ä¸ªè½¨é“çš„æœ€å°ä»£ä»·

- è®¾æŸä¸ªè½¨é“é‡Œå½“å‰æœ‰ `k`ä¸ªâ€˜#â€™ï¼ˆå…¶ä½™ `4-k` ä¸ªæ˜¯â€˜.â€™ï¼‰ï¼ŒæŠŠè¿™ä¸ªè½¨é“â€œå…¨å˜æˆåŒä¸€ä¸ªå­—ç¬¦â€çš„æœ€å°‘æ“ä½œæ˜¯ï¼š
  $$
  \min(k,\ 4-k)
  $$
  â€”â€”è¦ä¹ˆæŠŠè¿™ `k` ä¸ªâ€˜#â€™æ¸…æ‰ï¼ˆå˜â€˜.â€™ï¼‰ï¼Œè¦ä¹ˆæŠŠé‚£ `4-k` ä¸ªâ€˜.â€™æ¶‚ä¸Šï¼ˆå˜â€˜#â€™ï¼‰ï¼ŒäºŒè€…å–è¾ƒå°ã€‚

### ğŸ“Œ å…¨å±€ç­”æ¡ˆä¸æ›´æ–°

- åˆå§‹ç­”æ¡ˆå°±æ˜¯æ‰€æœ‰è½¨é“ä»£ä»·çš„æ€»å’Œï¼š
   $$
   \sum \min(k_{\text{orbit}}, 4-k_{\text{orbit}})
   $$
   
- å•ç‚¹ç¿»è½¬æ›´æ–°ï¼ˆæŠŠæŸä¸ª `(r,c)` çš„æ ¼å­â€˜#â€™â†”â€˜.â€™ï¼‰åªä¼šå½±å“å®ƒæ‰€å±çš„é‚£ä¸€ä¸ªè½¨é“çš„è®¡æ•° `k`ï¼ˆ`+1` æˆ– `-1`ï¼‰ã€‚
   åšæ³•ï¼š
  
  1. å…ˆä»æ€»ç­”æ¡ˆé‡Œå‡å»è¯¥è½¨é“åŸæ¥çš„è´¡çŒ® `min(k,4-k)`ï¼›
  2. æŒ‰ç¿»è½¬æ›´æ–°è¯¥è½¨é“çš„ `k`ï¼›
  3. å†æŠŠæ–°çš„ `min(k,4-k)` åŠ å›æ€»ç­”æ¡ˆã€‚
- è¿™æ ·æ¯æ¬¡æ›´æ–°éƒ½æ˜¯ `O(1)`ï¼Œé¢„å¤„ç†ç»Ÿè®¡æ‰€æœ‰è½¨é“çš„ `k` æ˜¯ `O(N^2)`ã€‚è½¨é“æ•°æ˜¯ `(N/2) * (N/2)`ã€‚

### ğŸ“Œ å¦‚ä½•ç»™è½¨é“ç¼–å·ï¼ˆå®ç°å°æŠ€å·§ï¼‰

æŠŠ `(i,j)` å‹åˆ°å®ƒåœ¨å·¦ä¸Šå››åˆ†ä¹‹ä¸€çš„ä»£è¡¨åæ ‡ï¼š
$$
a=\min(i,\,N-1-i),\quad b=\min(j,\,N-1-j)
$$
åˆ™ `(a,b)` å”¯ä¸€ç¡®å®šè½¨é“ï¼Œå¯ç”¨ `id = a * (N/2)+ b` ç´¢å¼•å…¶è®¡æ•° `k`ã€‚

> **å°ç»“ï¼šåˆ†è½¨é“ã€æ¯è½¨é“å– `min(k,4-k)`ã€å•ç‚¹æ›´æ–°åªæ”¹ ä¸€ä¸ªè½¨é“ï¼Œæ•´ä½“ `O(N^2+U)`ã€‚**

```c++
#include <bits/stdc++.h>
using namespace std;

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);

    int N, U;
    cin >> N >> U;
    vector<string> g(N);
    for (int i = 0; i < N; ++i) cin >> g[i];

    int H = N / 2;                          // number of orbits per row/col
    auto id_of = [&](int i, int j) -> int { // unique id for the 4-cell orbit
        int a = min(i, N - 1 - i);
        int b = min(j, N - 1 - j);
        return a * H + b;
    };

    // Count '#' in each 4-cell orbit
    vector<int> cnt(H * H, 0);
    for (int i = 0; i < N; ++i) {
        for (int j = 0; j < N; ++j) {
            int id = id_of(i, j);
            if (g[i][j] == '#') ++cnt[id];
        }
    }

    long long answer = 0;
    for (int id = 0; id < H * H; ++id) {
        int k = cnt[id];
        answer += min(k, 4 - k);
    }

    auto output = [&]() {
        cout << answer << '\n';
    };

    output(); // before any updates

    while (U--) {
        int r, c; cin >> r >> c;
        --r; --c; // 0-index

        int id = id_of(r, c);

        // remove old contribution
        answer -= min(cnt[id], 4 - cnt[id]);

        // toggle cell and update count
        if (g[r][c] == '#') {
            g[r][c] = '.';
            --cnt[id];
        } else {
            g[r][c] = '#';
            ++cnt[id];
        }

        // add new contribution
        answer += min(cnt[id], 4 - cnt[id]);

        output();
    }
    return 0;
}

```

### Problem 2. Making Mexes

é¢˜æ„ï¼šæŠŠæ•°ç»„çš„ mex å˜æˆæ¯ä¸ª `i`çš„æœ€å°‘æ”¹åŠ¨æ•°ã€‚
$$
iâˆˆ[0..N]
$$

### ğŸ“Œ æ€è·¯ï¼š

![idea](./images/8.png)

![idea](./images/9.png)

```c++
#include <bits/stdc++.h>
using namespace std;

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);

    int N;
    cin >> N;
    vector<long long> cnt(N + 1, 0); // ai in [0..N]

    for (int i = 0; i < N; ++i) {
        int x; cin >> x;
        if (0 <= x && x <= N) ++cnt[x];
        // (x > N cannot happen per constraints, but safe anyway)
    }

    // ans[0] = number of zeros to delete
    cout << cnt[0] << "\n";

    long long miss = 0; // number of j in [0..i-1] with cnt[j] == 0
    for (int i = 1; i <= N; ++i) {
        if (cnt[i - 1] == 0) ++miss;
        // remove all i's, and create all missing values in [0..i-1]
        // each changed i can fill one missing; leftover missing or leftover i's cost extra
        long long ans = max(cnt[i], miss);
        cout << ans << "\n";
    }
    return 0;
}

```

### Problem 3. Printing Sequences

é¢˜æ„ï¼šç”¨æœ€å¤š K æ¬¡ `PRINT` + ä»»æ„å¤šå±‚ `REP` ç”Ÿæˆç»™å®šåºåˆ—

ğŸ“Œ æ€è·¯ï¼šæ ¸å¿ƒæ€è·¯æ˜¯æŠŠç¨‹åºçœ‹æˆç”±ä¸¤ç§ç»„åˆæ„æˆï¼š

1. **ä¸²è”ï¼ˆConcatenationï¼‰**ï¼šæŠŠä¸¤ä¸ªå­ç¨‹åºæ¥åœ¨ä¸€èµ·ï¼Œæ‰€éœ€ `PRINT` æ¬¡æ•°ç›¸åŠ ï¼›
2. **é‡å¤ï¼ˆRepetitionï¼‰**ï¼š`REP t (Q)` æŠŠæŸæ®µå­åºåˆ—æ•´æ®µé‡å¤è‹¥å¹²æ¬¡â€”â€”**ä¸å¢åŠ ** `PRINT` æ¬¡æ•°ï¼ˆä»ç­‰äº `Q` çš„ `PRINT` å¶å­æ•°ï¼‰ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬åªéœ€åˆ¤æ–­ï¼šèƒ½å¦ç”¨è¿™ä¸¤ç§æ“ä½œæŠŠç›®æ ‡åºåˆ—æ‹¼å‡ºæ¥ï¼Œä½¿å¾—**å¶å­ï¼ˆ`PRINT x`ï¼‰çš„æ•°é‡ â‰¤ K**ã€‚è¿™è½¬åŒ–ä¸ºä¸€ä¸ªåŒºé—´ DPã€‚

------

#### åŒºé—´ DP è®¾è®¡

- è®¾åºåˆ—ä¸º `a[0..N-1]`ï¼ˆN â‰¤ 100, K â‰¤ 3ï¼‰ã€‚
- å®šä¹‰ `dp[l][r]`ï¼šæ„é€ å­åºåˆ— `a[l..r]` æ‰€éœ€æœ€å°‘ `PRINT` æ•°ï¼ˆå³æœ€å°‘å¶å­æ•°ï¼‰ã€‚

#### åˆå§‹ä¸è½¬ç§»

- **åŸºåº•ï¼ˆå…¨ç›¸åŒæ®µï¼‰**ï¼šå¦‚æœ `a[l..r]` å…¨éƒ¨ç›¸åŒï¼ˆå€¼éšä¾¿ï¼Œåªè¦ä¸€è‡´ï¼‰ï¼Œå¯ä»¥ï¼š

  ```
  REP (r-l+1)
      PRINT a[l]
  END
  ```

  åªéœ€ **1** æ¬¡ `PRINT`ï¼Œæ‰€ä»¥ `dp[l][r] = 1`ã€‚

- **ä¸²è”**ï¼šå¯¹ä»»æ„åˆ‡åˆ†ç‚¹ `k`ï¼ˆ`l â‰¤ k < r`ï¼‰ï¼š
  $$
  dp[l][r] = \min\big(dp[l][k] + dp[k+1][r]\big)
  $$

- **é‡å¤å‹ç¼©**ï¼šè‹¥ `a[l..r]` å¯ç”±æŸä¸ª**åŸºæ¨¡å¼** `a[l..l+p-1]` é‡å¤æ•´é½é“ºæ»¡ï¼ˆ`len = r-l+1`ï¼Œä¸” `len % p == 0`ï¼Œå¹¶ä¸”æ¯ä¸ªå—éƒ½ä¸åŸºæ¨¡å¼ç›¸åŒï¼‰ï¼Œåˆ™
  $$
  dp[l][r] = \min\big(dp[l][r],\ dp[l][l+p-1]\big)
  $$
  â€”â€”å¤–å±‚åŒ…ä¸€å±‚ `REP (len/p)`ï¼Œ`PRINT` å¶å­æ•°**ä¸å˜**ã€‚

### åˆ¤å®š

- æœ€ç»ˆåˆ¤æ–­ `dp[0][N-1] â‰¤ K` åˆ™è¾“å‡º YESï¼Œå¦åˆ™ NOã€‚

------

#### å¤æ‚åº¦ä¸å®ç°ç»†èŠ‚

- ç›´æ¥å®ç°ï¼š
  - é¢„å¤„ç† `allSame[l][r]` åˆ¤æ–­åŒºé—´æ˜¯å¦å…¨ç›¸åŒï¼ˆO(NÂ²)ï¼‰ã€‚
  - æšä¸¾é•¿åº¦ `len`ï¼Œæšä¸¾åŒºé—´ `(l,r)`ï¼ˆO(NÂ²)ï¼‰ï¼Œ
    - æšä¸¾åˆ‡åˆ†ç‚¹ `k`ï¼ˆO(N)ï¼‰ï¼Œ
    - æšä¸¾åŸºæ¨¡å¼é•¿åº¦ `p`ï¼ˆO(N)ï¼‰ï¼Œå¹¶é€ä½æ¯”å¯¹æ˜¯å¦æ•´é½é‡å¤ï¼ˆæœ€å O(N)ï¼‰ã€‚
  - ç²—ç•¥ä¸Šç•Œ O(NÂ³)ï½O(Nâ´)ï¼Œä½† N=100 å®Œå…¨å¯è¿‡ï¼›å®è·µä¸­å¯æŠŠâ€œæ£€æŸ¥æ•´é½é‡å¤â€åœ¨å¾ªç¯é‡Œåšçº¿æ€§æ¯”å¯¹ï¼Œæ•´ä½“ **O(NÂ³)** è¶³å¤Ÿã€‚
- å°ä¼˜åŒ–ï¼š
  - åœ¨ DP ä¸­ä¸€æ—¦æŸä¸ª `dp[l][r]` å·²ç» â‰¤ Kï¼Œå°±æ²¡å¿…è¦ç»§ç»­å°è¯•æ›´å·®çš„è½¬ç§»ï¼ˆå‰ªæï¼‰ã€‚
  - â€œæ•´é½é‡å¤â€çš„æ£€æŸ¥å¯ä»¥ç”¨å“ˆå¸Œ / Z å‡½æ•° / KMP å‰ç¼€å‡½æ•°åŠ é€Ÿåˆ°å‡æ‘Š O(1) åˆ¤æ–­ï¼Œä½†å¯¹ N=100 æ²¡å¿…è¦ã€‚

ä¸€å¥è¯æ€»ç»“ï¼š

> ç”¨åŒºé—´ DP æ±‚â€œæœ€å°‘ `PRINT` å¶å­æ•°â€ï¼Œè½¬ç§»åŒ…å«**ä¸²è”**ä¸**æ•´æ®µé‡å¤å‹ç¼©**ï¼›æœ€ååˆ¤æ–­æ˜¯å¦ â‰¤ Kã€‚

```c++
#include <bits/stdc++.h>
using namespace std;

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);

    int T;
    cin >> T;
    while (T--) {
        int N, K;
        cin >> N >> K;
        vector<int> a(N);
        for (int i = 0; i < N; ++i) cin >> a[i];

        const int INF = 1e9;
        vector<vector<int>> dp(N, vector<int>(N, INF));
        vector<vector<bool>> allSame(N, vector<bool>(N, false));

        // Precompute allSame
        for (int l = 0; l < N; ++l) {
            allSame[l][l] = true;
            for (int r = l + 1; r < N; ++r) {
                allSame[l][r] = allSame[l][r - 1] && (a[r] == a[l]);
            }
        }

        // Helper to check if a[l..r] == k repeats of a[l..l+p-1]
        auto isRepeat = [&](int l, int r, int p) -> bool {
            int len = r - l + 1;
            if (p <= 0 || len % p) return false;
            for (int i = l + p; i <= r; ++i) {
                if (a[i] != a[l + (i - l) % p]) return false;
            }
            return true;
        };

        for (int len = 1; len <= N; ++len) {
            for (int l = 0; l + len - 1 < N; ++l) {
                int r = l + len - 1;

                // If all equal -> 1 PRINT with a REP
                if (allSame[l][r]) {
                    dp[l][r] = 1;
                }

                // Concatenation
                for (int k = l; k < r; ++k) {
                    dp[l][r] = min(dp[l][r], dp[l][k] + dp[k + 1][r]);
                }

                // Repetition (use smaller base pattern if it tiles the whole segment)
                for (int p = 1; p < len; ++p) { // p = base pattern length
                    if (isRepeat(l, r, p)) {
                        dp[l][r] = min(dp[l][r], dp[l][l + p - 1]);
                    }
                }
            }
        }

        cout << (dp[0][N - 1] <= K ? "YES" : "NO") << "\n";
    }
    return 0;
}

```

